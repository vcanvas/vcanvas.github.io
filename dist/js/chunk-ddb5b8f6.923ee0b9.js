(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ddb5b8f6"],{"39a4":function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"forgetpwd-main"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.is_username,expression:"is_username"}],attrs:{id:"forget-username"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.confirm_username,expression:"confirm_username"}],staticClass:"confirm_username_ipt",attrs:{type:"text",placeholder:"请确认您的用户名"},domProps:{value:e.confirm_username},on:{keypress:function(s){return e.iptOnInput(s)},input:function(s){s.target.composing||(e.confirm_username=s.target.value)}}}),t("button",{staticClass:"confirm_username_btn",on:{click:function(s){return e.toForgetpwdStep2()}}},[e._v("\n      确认\n    ")]),t("p",{directives:[{name:"show",rawName:"v-show",value:e.username_err,expression:"username_err"}]},[e._v("\n      用户名\n      "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.usernameEmpty,expression:"usernameEmpty"}]},[e._v("不能为空")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.usernameError,expression:"usernameError"}]},[e._v("不存在")]),e._v("\n      !\n    ")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.is_code,expression:"is_code"}],attrs:{id:"forget-mailcode"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.mail_code,expression:"mail_code"}],staticClass:"mail_code_ipt",attrs:{type:"text",placeholder:"验证码已发送到您的邮箱"},domProps:{value:e.mail_code},on:{keypress:function(s){return e.iptOnInput(s)},input:function(s){s.target.composing||(e.mail_code=s.target.value)}}}),t("button",{staticClass:"mail_code_btn",on:{click:function(s){return e.checkCode()}}},[e._v("提交验证码")]),t("p",{staticClass:"reseterr"},[e._v(e._s(e.reset_error))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.is_reset,expression:"is_reset"}],attrs:{id:"forget-resetpwd"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.resetpwd,expression:"resetpwd"}],ref:"resetIpt1",staticClass:"resetpwd_ipt",attrs:{type:"password",pattern:"^[a-zA-Z][a-zA-Z0-9_]{5,17}$",placeholder:"请输入新密码，字母开头，6~18位字母、数字和下划线"},domProps:{value:e.resetpwd},on:{keypress:function(s){return e.iptOnInput(s)},input:[function(s){s.target.composing||(e.resetpwd=s.target.value)},function(s){return e.pwdCheck(s)}]}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.resetpwd2,expression:"resetpwd2"}],ref:"resetIpt2",staticClass:"resetpwd_ipt2",attrs:{type:"password",placeholder:"两次密码保持一致"},domProps:{value:e.resetpwd2},on:{keypress:function(s){return e.iptOnInput(s)},input:[function(s){s.target.composing||(e.resetpwd2=s.target.value)},function(s){return e.pwd2Check(s)}]}}),t("button",{staticClass:"resetpwd_btn",on:{click:function(s){return e.toResetPwd()}}},[e._v("完成")]),t("p",{directives:[{name:"show",rawName:"v-show",value:e.isResetError,expression:"isResetError"}],staticClass:"reseterr"},[e._v(e._s(e.reset_error))]),t("p",{directives:[{name:"show",rawName:"v-show",value:e.isResetSuccess,expression:"isResetSuccess"}],staticClass:"resetsuccess"},[e._v(e._s(e.reset_success))])]),t("p",{attrs:{id:"cancelreset"},on:{click:function(s){return e.returnLoginmain()}}},[e._v("返回登录")])])},i=[],n={data:function(){return{confirm_username:"",mail_code:"",code_true:"",is_username:!0,is_code:!1,is_reset:!1,is_code_true:!1,resetpwd:"",resetpwd2:"",reset_error:"",reset_success:"",username_err:!1,usernameEmpty:!1,usernameError:!1,isResetError:!1,isResetSuccess:!1}},methods:{toForgetpwdStep2:function(){var e=this;this.confirm_username?this.axios.get("http://".concat(this.$store.state.URL,":").concat(this.$store.state.PORT,"/email"),{params:{username:this.confirm_username}}).then((function(s){-1==s.data.status?(e.username_err=!0,e.usernameEmpty=!1,e.usernameError=!0):(e.username_err=!1,e.is_username=!1,e.is_reset=!1,e.is_code=!0,e.code_true=s.data)})):(this.username_err=!0,this.usernameEmpty=!0,this.usernameError=!1)},iptOnInput:function(e){32===e.keyCode&&e.preventDefault()},checkCode:function(){this.mail_code==this.code_true?(this.reset_error="",this.is_username=!1,this.is_code=!1,this.is_reset=!0):this.$message.error("验证码错误!请检查！")},pwdCheck:function(e){this.resetpwd?e.target.checkValidity()?this.isResetError=!1:(this.isResetError=!0,this.reset_error="密码格式错误，请检查密码格式！"):this.$message.error("密码不能为空！")},pwd2Check:function(e){e.target.value?e.target.value==this.resetpwd?this.isResetError=!1:(this.isResetError=!0,this.reset_error="确认密码与密码不一致！请重试！"):this.reset_error="确认密码不能为空！"},toResetPwd:function(){var e=this;this.resetpwd?this.resetpwd2||this.$message.error("确认密码不能为空！"):this.$message.error("密码不能为空！"),this.resetpwd===this.resetpwd2?(this.reset_error="",console.log(this.confirm_username),this.axios.get("http://".concat(this.$store.state.URL,":").concat(this.$store.state.PORT,"/resetpwd"),{params:{username:this.confirm_username,password:this.resetpwd}}).then((function(s){console.log(s),1==s.data&&(e.isResetSuccess=!0,e.$messgae({type:"success",message:"密码重置成功！即将返回登录界面！"}),setTimeout((function(){e.$router.push("/login"),e.$store.commit("toForgetpwd",!1),e.is_username=!0,e.is_code=!1,e.is_reset=!1}),2e3))}))):this.reset_error="确认密码需与密码保持一致！"},returnLoginmain:function(){this.$store.commit("toForgetpwd",!1),this.$router.push("/login"),this.is_username=!0,this.is_code=!1,this.is_reset=!1},returnMain:function(){this.$router.push("/"),this.$store.commit("toForgetpwd",!1),this.is_username=!0,this.is_code=!1,this.is_reset=!1}},mounted:function(){}},o=n,a=(t("6693"),t("2877")),u=Object(a["a"])(o,r,i,!1,null,null,null);s["default"]=u.exports},6693:function(e,s,t){"use strict";t("883b")},"883b":function(e,s,t){}}]);
//# sourceMappingURL=chunk-ddb5b8f6.923ee0b9.js.map